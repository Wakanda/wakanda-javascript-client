/*! wakanda-client.node.js - v2.0.0 - 2017-04-3 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("request")):"function"==typeof define&&define.amd?define(["request"],e):"object"==typeof exports?exports.WakandaClient=e(require("request")):t.WakandaClient=e(t.request)}(this,function(t){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){t.exports=r(1)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(2);e.WakandaClient=n.default;var i=r(33),o=r(7);e.CatalogBaseService=o.CatalogBaseService;var a=r(23);e.CollectionBaseService=a.CollectionBaseService;var s=r(20);e.DataClassBaseService=s.DataClassBaseService;var u=r(31);e.DirectoryBaseService=u.DirectoryBaseService;var c=r(13);e.EntityBaseService=c.EntityBaseService;var l=r(27);e.MediaBaseService=l.MediaBaseService,n.default.HttpClient=i.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(3),i=r(29),o=r(15),a=r(28),s=r(32),u=function(){function t(e){var r="object"==typeof e?e.host:void 0,n="object"==typeof e?e.catalog:void 0;this._httpClient=new t.HttpClient({apiPrefix:r||""}),this.catalog=n;var s=new i.default({wakJSC:this});this.directory={login:function(t,e,r){return s.login(t,e,r)},logout:function(){return s.logout()},getCurrentUser:function(){return s.getCurrentUser()},getCurrentUserBelongsTo:function(t){return s.getCurrentUserBelongsTo(t)}},this.helper={isEntity:function(t){return t instanceof o.default},isCollection:function(t){return t instanceof a.default}}}return t.prototype.getCatalog=function(t){var e=new n.default({wakJSC:this});return e.get(t)},t.prototype.version=function(){return s.version},t}();e.default=u},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(4),o=r(5),a=r(8),s=r(9),u=r(10),c=function(t){function e(e){var r=t.call(this,e)||this;return r.service=new o.default({wakJSC:r.wakJSC}),r}return n(e,t),e.prototype.needDataClass=function(t){this.seenDataClasses.indexOf(t)===-1&&this.seenDataClasses.push(t)},e.prototype.get=function(t){var e=this;return this.seenDataClasses=[],this.service.get(t).then(function(t){for(var r=[],n=0,i=t;n<i.length;n++){for(var o=i[n],c=[],l=function(r){switch(r.kind){case"relatedEntity":c.push(new s.AttributeRelated({name:r.name,type:r.type,kind:r.kind})),e.needDataClass(r.type);break;case"storage":case"calculated":case"alias":var n=r.readOnly||"image"===r.type||"blob"===r.type,i=void 0!==r.simpleDate?r.simpleDate:void 0;c.push(new s.Attribute({name:r.name,type:r.type,readOnly:n,kind:r.kind,simpleDate:i}));break;case"relatedEntities":var o;t.some(function(t){if(t.collectionName===r.type)return o=t.name,!0});var a=new s.AttributeCollection({name:r.name,type:r.type,kind:r.kind,entityType:o});c.push(a),e.needDataClass(a.entityType);break;default:throw new Error("[WakandaClient] Unhandled "+r.kind+" attribute type")}},p=0,d=o.attributes;p<d.length;p++){var f=d[p];l(f)}for(var h={entity:[],collection:[],dataClass:[]},y=0,_=o.methods;y<_.length;y++){var v=_[y];switch(v.applyTo){case"entity":h.entity.push(v.name);break;case"entityCollection":h.collection.push(v.name);break;case"dataClass":h.dataClass.push(v.name);break;default:throw new Error("[WakandaClient] Unrecognized "+v.applyTo+" method type")}}var m=new s.DataClass({name:o.name,collectionName:o.collectionName,attributes:c,methods:h}),C=new u.default({wakJSC:e.wakJSC,dataClass:m,methods:h,dataURI:o.dataURI});C._decorateDataClass(),r.push(m)}for(var b=new a.default({dataClasses:r}),g=0,w=e.seenDataClasses;g<w.length;g++){var S=w[g];if(!b[S])throw new Error("Needed "+S+" dataClass is not present on catalog")}return b})},e}(i.default);e.default=c},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){var e=t.wakJSC;this.wakJSC=e}return t}();e.default=r},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(6),o=r(7),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.get=function(t){return o.CatalogBaseService.get({httpClient:this.httpClient,dataClasses:t,catalog:this.wakJSC.catalog})},e}(i.default);e.default=a},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){var e=t.wakJSC;this.wakJSC=e,this.httpClient=e._httpClient}return t}();e.default=r},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.get=function(t){var e=t.httpClient,r=t.dataClasses,n=t.catalog,i="/";if(Array.isArray(r))i+=r.join();else{if("undefined"!=typeof r)throw new Error("Catalog.get: first parameter should be an array");i+="$all"}var o=n?"/"+n:"";return e.get({uri:"/rest/$catalog"+o+i}).then(function(t){var e=[],r=JSON.parse(t.body);if(r.dataClasses)for(var n=0,i=r.dataClasses;n<i.length;n++){var o=i[n],a=[];if(o.attributes)for(var s=0,u=o.attributes;s<u.length;s++){var c=u[s];a.push({name:c.name,kind:c.kind,type:c.type,readOnly:c.readOnly,simpleDate:void 0===c.simpleDate?void 0:c.simpleDate})}var l=[];if(o.methods)for(var p=0,d=o.methods;p<d.length;p++){var f=d[p];l.push({name:f.name,applyTo:f.applyTo})}e.push({name:o.name,collectionName:o.collectionName,attributes:a,methods:l,dataURI:o.dataURI})}return e})},t}();e.CatalogBaseService=r},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){for(var e=t.dataClasses,r=0,n=e;r<n.length;r++){var i=n[r];this[i.name]=i}}return t}();e.default=r},function(t,e){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){var e=t.name,r=t.collectionName,n=t.attributes,i=t.methods;this.name=e,this.collectionName=r,this.attributes=n,this.methods=i}return t}();e.DataClass=n;var i=function(){function t(t){var e=t.name,r=t.type,n=t.readOnly,i=t.kind,o=t.simpleDate;this.name=e,this.type=r,this.readOnly=n===!0,this.kind=i,this.simpleDate=o}return t}();e.Attribute=i;var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(i);e.AttributeRelated=o;var a=function(t){function e(e){var r=e.name,n=e.type,i=e.readOnly,o=e.kind,a=e.entityType,s=t.call(this,{name:r,type:n,readOnly:i,kind:o})||this;return s.entityType=a,s}return r(e,t),e}(i);e.AttributeCollection=a},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(4),o=r(11),a=r(19),s=r(21),u=r(25),c=r(15),l=r(28),p=r(9),d=r(17),f=r(24),h=r(16),y=r(18),_=new Map,v=function(t){function e(e){var r=e.wakJSC,n=e.dataClass,i=e.methods,o=e.dataURI,s=t.call(this,{wakJSC:r})||this;return s.dataClass=n,s.methods=i,s.service=new a.default({wakJSC:s.wakJSC,dataClassBusiness:s}),s.dataURI=o,_.set(n.name,s),s._dataClassBusinessMap=_,s}return n(e,t),e.prototype._decorateDataClass=function(){this.dataClass.find=this.find.bind(this),this.dataClass.query=this.query.bind(this),this.dataClass.create=this.create.bind(this),this._addUserDefinedMethods()},e.prototype._addUserDefinedMethods=function(){var t=this,e=this;this.methods.dataClass.forEach(function(r){t.dataClass[r]=function(){var t=Array.from(arguments);return e.callMethod(r,t)}})},e.prototype.callMethod=function(t,e){var r=this;return this.service.callMethod(t,e).then(function(t){return h.MethodAdapter.transform(t,r._dataClassBusinessMap)})},e.prototype.find=function(t,e){var r=this,n=e||{};if(void 0!==n.filter||void 0!==n.params||void 0!==n.pageSize||void 0!==n.start||void 0!==n.orderBy)throw new Error("Dataclass.find: options filter, params, pageSize, start and orderBy are not allowed");return this.service.find(t,n).then(function(t){return r._presentationEntityFromDbo({dbo:t})})},e.prototype.query=function(t){var e=this,r=t||{},n=r.select;if(r.method&&r.method.length>0)throw new Error("Dataclass.query: option method is not allowed");return r.pageSize||(r.pageSize=f.default.DEFAULT_PAGE_SIZE),this.service.query(r).then(function(t){return e._presentationCollectionFromDbo({dbo:t,pageSize:r.pageSize,initialSelect:n})})},e.prototype.create=function(t){var e={};if(t)for(var r in t)t[r]instanceof c.default&&(e[r]=t[r],delete t[r]);var n=this._presentationEntityFromDbo({dbo:t||{}});for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},e.prototype._createEntity=function(t){var e=t.key,r=t.deferred,n=t.dbo,i=new c.default({key:e,deferred:r,dataClass:this.dataClass}),a=new o.default({wakJSC:this.wakJSC,dataClass:this.dataClass,entity:i,dataClassBusiness:this});return a._decorateEntity(),r||(this._populateEntityDataFromDbo({dbo:n,entity:i}),a._flashEntityValues()),i},e.prototype._createCollection=function(t){var e=t.uri,r=t.deferred,n=t.pageSize,i=t.initialSelect,o=new l.default({deferred:r,dataClass:this.dataClass}),a=new s.default({wakJSC:this.wakJSC,dataClass:this.dataClass,dataClassBusiness:this,collection:o,collectionUri:e,pageSize:n,initialSelect:i});return a._decorateCollection(),o},e.prototype._createMedia=function(t){var e=t.uri,r=t.isImage,n=t.attributeName,i=t.entity,o=new d.default({uri:e}),a=new u.default({wakJSC:this.wakJSC,media:o,dataClassBusiness:this,isImage:r,attributeName:n,entity:i});return a._decorateMedia(),o},e.prototype._populateEntityDataFromDbo=function(t){var e=t.dbo,r=t.entity;r._stamp=e.__STAMP;for(var n=0,i=this.dataClass.attributes;n<i.length;n++){var o=i[n],a=e[o.name];if(null!==a&&void 0!==a)if(o instanceof p.AttributeRelated){var s=_.get(o.type);r[o.name]=s._presentationEntityFromDbo({dbo:a})}else if(o instanceof p.AttributeCollection){var s=_.get(o.entityType);r[o.name]=s._presentationCollectionFromDbo({dbo:a})}else if("image"===o.type||"blob"===o.type){var u=void 0;u=a&&a.__deferred&&a.__deferred.uri?a.__deferred.uri:null,r[o.name]=this._createMedia({uri:u,isImage:"image"===o.type,attributeName:o.name,entity:r})}else"date"===o.type?a?r[o.name]=o.simpleDate?y.default.wakParseSimpleDate(a):new Date(a):r[o.name]=null:r[o.name]=a;else"image"===o.type||"blob"===o.type?r[o.name]=this._createMedia({uri:null,isImage:"image"===o.type,attributeName:o.name,entity:r}):r[o.name]=null}return r},e.prototype._presentationEntityFromDbo=function(t){var e,r=t.dbo;return r||(e=null),e=r.__deferred?this._createEntity({key:r.__deferred.__KEY,deferred:!0}):this._createEntity({key:r.__KEY,dbo:r})},e.prototype._presentationCollectionFromDbo=function(t){var e,r=t.dbo,n=t.pageSize,i=t.initialSelect;if(r)if(r.__deferred)e=this._createCollection({deferred:!0,uri:r.__deferred.uri});else{e=this._createCollection({uri:r.__ENTITYSET,pageSize:n||r.__ENTITIES.length,initialSelect:i}),e._count=r.__COUNT,e._first=r.__FIRST,e._sent=r.__SENT,e._pageSize=n;for(var o=0,a=r.__ENTITIES;o<a.length;o++){var s=a[o];e.entities.push(this._presentationEntityFromDbo({dbo:s}))}}else e=null;return e},e}(i.default);e.default=v},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(4),o=r(12),a=r(9),s=r(15),u=r(16),c=r(17),l=r(18),p=function(t){function e(e){var r=e.wakJSC,n=e.entity,i=e.dataClass,a=e.dataClassBusiness,s=t.call(this,{wakJSC:r})||this;return s.entity=n,s.dataClass=i,s.dataClassBusiness=a,s.service=new o.default({wakJSC:r,entity:n,dataClassBusiness:a}),s}return n(e,t),e.prototype._decorateEntity=function(){this.entity.save=this.save.bind(this),this.entity.delete=this.delete.bind(this),this.entity.fetch=this.fetch.bind(this),this.entity.recompute=this.recompute.bind(this),this._addUserDefinedMethods()},e.prototype._flashEntityValues=function(){for(var t={},e=this.entity,r=0,n=this.dataClass.attributes;r<n.length;r++){var i=n[r],o=e[i.name];if(!(i instanceof a.AttributeCollection))if(i instanceof a.AttributeRelated)t[i.name]=o?o._key:null;else switch(i.type){case"image":case"blob":t[i.name]={uri:o.uri};break;case"object":t[i.name]=JSON.stringify(o);break;case"date":o?t[i.name]=i.simpleDate?l.default.wakToStringSimpleDate(o):o.toJSON():t[i.name]=null;break;default:t[i.name]=o}}this._oldEntityValues=t},e.prototype._addUserDefinedMethods=function(){var t=this,e=this;this.dataClassBusiness.methods.entity.forEach(function(r){t.entity[r]=function(){var t=Array.from(arguments);return e.callMethod(r,t)}})},e.prototype.fetch=function(t){var e=this,r=t||{};if(void 0!==r.filter||void 0!==r.params||void 0!==r.pageSize||void 0!==r.start||void 0!==r.orderBy)throw new Error("Entity.fetch: options filter, params, pageSize, start and orderBy are not allowed");return this.dataClassBusiness.find(this.entity._key,t).then(function(t){return e._refreshEntity({fresherEntity:t}),e._flashEntityValues(),e.entity})},e.prototype.callMethod=function(t,e){var r=this;if(!this.entity._key)throw new Error("Entity."+t+": can not be called on an unsaved entity");return this.service.callMethod(t,e).then(function(t){return u.MethodAdapter.transform(t,r.dataClassBusiness._dataClassBusinessMap)})},e.prototype.delete=function(){var t=this;if(!this.entity._key)throw new Error("Entity.delete: can not delete unsaved entity");return this.service.delete().then(function(){t.entity=null})},e.prototype.save=function(){var t=this,e=this.prepareDataForSave(),r=this._getExpandString();return this.service.save(e,r).then(function(e){var r=t.dataClassBusiness._presentationEntityFromDbo({dbo:e});return t._refreshEntity({fresherEntity:r}),t._flashEntityValues(),t.entity})},e.prototype.recompute=function(){var t=this,e=this.prepareDataForSave();return this.service.recompute(e).then(function(e){var r=t.dataClassBusiness._presentationEntityFromDbo({dbo:e});return t._refreshEntity({fresherEntity:r}),t.entity})},e.prototype.prepareDataForSave=function(){var t={},e=!1;this.entity._key&&this.entity._stamp?(t.__KEY=this.entity._key,t.__STAMP=this.entity._stamp):e=!0;for(var r=0,n=this.dataClass.attributes;r<n.length;r++){var i=n[r],o=this.entity[i.name];if(void 0===o&&(o=null),i instanceof a.AttributeRelated)t[i.name]=o?o._key:null;else{if(i.readOnly)continue;"date"===i.type?o?t[i.name]=i.simpleDate?l.default.wakToStringSimpleDate(o):o.toJSON():t[i.name]=o:i instanceof a.AttributeCollection||e&&null===o&&"ID"!==i.name||(t[i.name]=o)}}if(!e)for(var s=this._oldEntityValues||{},u=0,c=this.dataClass.attributes;u<c.length;u++){var i=c[u];if(void 0!==t[i.name]&&"ID"!==i.name)switch(i.type){case"image":case"blob":t[i.name].uri===s[i.name].uri&&delete t[i.name];break;case"object":JSON.stringify(t[i.name])===s[i.name]&&delete t[i.name];break;default:t[i.name]===s[i.name]&&delete t[i.name]}}return t},e.prototype._refreshEntity=function(t){var e=t.fresherEntity;for(var r in e)e.hasOwnProperty(r)&&"function"!=typeof e[r]&&(e[r]instanceof c.default?this.entity[r].uri=e[r].uri:this.entity[r]=e[r])},e.prototype._getExpandString=function(){for(var t="",e=0,r=this.dataClass.attributes;e<r.length;e++){var n=r[e];(n instanceof a.AttributeRelated||n instanceof a.AttributeCollection)&&this.entity[n.name]instanceof s.default&&!this.entity[n.name]._deferred&&(t+=n.name+",")}return t.length>0?t.slice(0,-1):null},e}(i.default);e.default=p},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(6),o=r(13),a=function(t){function e(e){var r=e.wakJSC,n=e.entity,i=e.dataClassBusiness,o=t.call(this,{wakJSC:r})||this;return o.entity=n,o.dataClassBusiness=i,o}return n(e,t),e.prototype.save=function(t,e){return o.EntityBaseService.save({httpClient:this.httpClient,dataURI:this.dataClassBusiness.dataURI,expand:e,data:t})},e.prototype.recompute=function(t){return o.EntityBaseService.recompute({httpClient:this.httpClient,dataURI:this.dataClassBusiness.dataURI,data:t})},e.prototype.callMethod=function(t,e){return o.EntityBaseService.callMethod({httpClient:this.httpClient,dataURI:this.dataClassBusiness.dataURI,methodName:t,parameters:e,entityKey:this.entity._key})},e.prototype.delete=function(){return o.EntityBaseService.delete({httpClient:this.httpClient,dataURI:this.dataClassBusiness.dataURI,entityKey:this.entity._key})},e}(i.default);e.default=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(14),i=function(){function t(){}return t.save=function(t){var e=t.httpClient,r=t.data,i=t.expand,o=t.dataURI,a="";return i&&(a="&$expand="+i),e.post({uri:o+"?$method=update"+a,data:r}).then(function(t){var e=JSON.parse(t.body);return delete e.__entityModel,n.default.removeRestInfoFromEntity(e),e})},t.recompute=function(t){var e=t.httpClient,r=t.dataURI,i=t.data;return e.post({uri:r+"?$method=update&$refresh=true",data:i}).then(function(t){var e=JSON.parse(t.body);return delete e.__entityModel,n.default.removeRestInfoFromEntity(e),e})},t.callMethod=function(t){var e=t.httpClient,r=t.dataURI,n=t.methodName,i=t.parameters,o=t.entityKey;return e.post({uri:r+"("+o+")/"+n,data:i}).then(function(t){var e=JSON.parse(t.body);return e.result||e||null})},t.delete=function(t){var e=t.httpClient,r=t.dataURI,n=t.entityKey;return e.post({uri:r+"("+n+")?$method=delete"}).then(function(t){var e=JSON.parse(t.body);return!(!e||e.ok!==!0)||Promise.reject(new Error)})},t}();e.EntityBaseService=i},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.handleOptions=function(t){if(!t)return"";var e=t.select,r=t.filter,n=t.params,i=t.pageSize,o=t.start,a=t.orderBy,s=t.method,u=t.emMethod,c="?";if(e&&(c+="&$expand="+e),r&&(c+='&$filter="'+r+'"'),a&&(c+="&$orderby="+a),n){if(!Array.isArray(n))throw new Error("params option must be an array");if(n.length>0){for(var l="[",p=0,d=n;p<d.length;p++){var f=d[p];l+="string"==typeof f?'"'+f+'",':f+","}l=l.slice(0,-1),l+="]",c+="&$params='"+l+"'"}}if(i){if(!this.isInteger(i))throw new Error("pageSize option must be an integer");c+="&$limit="+i}if(o){if(!this.isInteger(o))throw new Error("start option must be an integer");c+="&$skip="+o}return s&&(c+="&$method="+s),u&&(c+="&$emMethod="+u),c.length>1&&"&"===c[1]&&(c=c.replace("?&","?")),"?"===c?"":c},t.isInteger=function(t){return"number"==typeof t&&!isNaN(t)&&t%1===0},t.removeRestInfoFromEntity=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var r=t[e];r&&r.__deferred&&r.__deferred.__KEY&&delete r.__deferred.uri}},t}();e.default=r},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){var e=t.key,r=t.deferred,n=t.dataClass;this._key=e,this._deferred=r===!0,Object.defineProperty(this,"_dataClass",{enumerable:!1,configurable:!1,writable:!1,value:n})}return t}();e.default=r},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.transform=function(t,e){if(t&&t.__entityModel){var r=e.get(t.__entityModel);if(r){if("undefined"!=typeof t.__COUNT&&"undefined"!=typeof t.__ENTITIES&&"undefined"!=typeof t.__FIRST&&"undefined"!=typeof t.__SENT)return r._presentationCollectionFromDbo({dbo:t});if(t.__KEY&&t.__STAMP)return r._presentationEntityFromDbo({dbo:t})}}return t},t}();e.MethodAdapter=r},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){var e=t.uri;this.uri=e}return t}();e.default=r},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.wakParseSimpleDate=function(t){if(!t)return null;var e=t.split("!");if(3!==e.length)return null;var r=new Date(Date.UTC(parseInt(e[2],10),parseInt(e[1],10)-1,parseInt(e[0],10)));return r},t.wakToStringSimpleDate=function(t){var e;return t instanceof Date?e=t.getUTCDate()+"!"+(t.getUTCMonth()+1)+"!"+t.getUTCFullYear():null},t}();e.default=r},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(6),o=r(20),a=function(t){function e(e){var r=e.wakJSC,n=e.dataClassBusiness,i=t.call(this,{wakJSC:r})||this;return i.dataClassBusiness=n,i}return n(e,t),e.prototype.find=function(t,e){return o.DataClassBaseService.find({httpClient:this.httpClient,key:t,options:e,dataURI:this.dataClassBusiness.dataURI})},e.prototype.query=function(t){return o.DataClassBaseService.query({httpClient:this.httpClient,options:t,dataURI:this.dataClassBusiness.dataURI})},e.prototype.callMethod=function(t,e){return o.DataClassBaseService.callMethod({httpClient:this.httpClient,dataURI:this.dataClassBusiness.dataURI,methodName:t,parameters:e})},e}(i.default);e.default=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(14),i=function(){function t(){}return t.find=function(t){var e=t.httpClient,r=t.key,i=t.options,o=t.dataURI;if("string"!=typeof r&&"number"!=typeof r)throw new Error("DataClass.find: Invalid id type");var a=n.default.handleOptions(i);return e.get({uri:o+"("+r+")"+a}).then(function(t){var e=JSON.parse(t.body);return delete e.__entityModel,n.default.removeRestInfoFromEntity(e),e})},t.query=function(t){var e=t.httpClient,r=t.options,i=t.dataURI;r.method="entityset",Array.isArray(r.params)&&(r.params=this._sanitizeOptionParams(r.params));var o=n.default.handleOptions(r);return e.get({uri:i+o}).then(function(t){var e=JSON.parse(t.body);delete e.__entityModel;for(var r=0,i=e.__ENTITIES;r<i.length;r++){var o=i[r];n.default.removeRestInfoFromEntity(o)}return e})},t.callMethod=function(t){var e=t.httpClient,r=t.methodName,n=t.parameters,i=t.dataURI;return e.post({uri:i+"/"+r,data:n}).then(function(t){var e=JSON.parse(t.body);return e.result||e||null})},t._sanitizeOptionParams=function(t){return t.map(function(t){return t instanceof Date?t.toISOString():t})},t}();e.DataClassBaseService=i},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(4),o=r(22),a=r(24),s=r(16),u=function(t){function e(e){var r=e.wakJSC,n=e.dataClass,i=e.collection,a=e.dataClassBusiness,s=e.collectionUri,u=e.pageSize,c=e.initialSelect,l=t.call(this,{wakJSC:r})||this;return l.collection=i,l.dataClass=n,l.dataClassBusiness=a,l.service=new o.default({wakJSC:r,collection:i,dataClassBusiness:a,collectionUri:s}),l.pageSize=u,l.initialSelect=c,l}return n(e,t),e.prototype._decorateCollection=function(){this.collection.fetch=this.fetch.bind(this),this.collection.nextPage=this.nextPage.bind(this),this.collection.prevPage=this.prevPage.bind(this),this.collection.more=this.more.bind(this),this._addUserDefinedMethods()},e.prototype.fetch=function(t){var e=this,r=t||{};if(r.method&&r.method.length>0)throw new Error("Collection.fetch: option method is not allowed");return r.pageSize||(r.pageSize=this.pageSize?this.pageSize:a.default.DEFAULT_PAGE_SIZE),r.select&&(this.initialSelect=r.select),this.pageSize=r.pageSize,this.service.fetch(r).then(function(t){var r=e.dataClassBusiness._presentationCollectionFromDbo({dbo:t,pageSize:e.pageSize});return e._refreshCollection({fresherCollection:r}),e.collection})},e.prototype.more=function(){var t=this;if(this.collection._deferred===!0)throw new Error("Collection.more: can not call more on a deferred collection");var e={start:this.collection._first+this.collection._sent,pageSize:this.pageSize};return this.initialSelect&&(e.select=this.initialSelect),this.service.fetch(e).then(function(e){t.collection._sent+=e.__ENTITIES.length;for(var r=0,n=e.__ENTITIES;r<n.length;r++){var i=n[r];t.collection.entities.push(t.dataClassBusiness._presentationEntityFromDbo({dbo:i}))}return t.collection})},e.prototype.nextPage=function(){if(this.collection._deferred===!0)throw new Error("Collection.nextPage: can not call nextPage on a deferred collection");var t={start:this.collection._first+this.pageSize,pageSize:this.pageSize};return this.initialSelect&&(t.select=this.initialSelect),this.fetch(t)},e.prototype.prevPage=function(){if(this.collection._deferred===!0)throw new Error("Collection.prevPage: can not call prevPage on a deferred collection");var t={start:this.collection._first-this.pageSize,pageSize:this.pageSize};return this.initialSelect&&(t.select=this.initialSelect),this.fetch(t)},e.prototype._addUserDefinedMethods=function(){var t=this,e=this;this.dataClassBusiness.methods.collection.forEach(function(r){t.collection[r]=function(){var t=Array.from(arguments);return e.callMethod(r,t)}})},e.prototype.callMethod=function(t,e){var r=this;if(this.collection._deferred)throw new Error("Collection."+t+": can not be called on a deferred collection");return this.service.callMethod(t,e).then(function(t){return s.MethodAdapter.transform(t,r.dataClassBusiness._dataClassBusinessMap)})},e.prototype._refreshCollection=function(t){var e=t.fresherCollection;for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&"function"!=typeof e[r]&&(this.collection[r]=e[r])},e}(i.default);e.default=u},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(6),o=r(23),a=function(t){function e(e){var r=e.wakJSC,n=e.collection,i=e.dataClassBusiness,a=e.collectionUri,s=t.call(this,{wakJSC:r})||this;return s.collection=n,s.dataClassBusiness=i,s.collectionUri=a,s.isEntitySet=o.isEntitySetUri(a),s}return n(e,t),e.prototype.fetch=function(t){var e=this;return o.CollectionBaseService.fetch({httpClient:this.httpClient,collectionUri:this.collectionUri,isEntitySet:this.isEntitySet,options:t}).then(function(t){return t.__ENTITYSET&&(e.collectionUri=t.__ENTITYSET,e.isEntitySet=o.isEntitySetUri(t.__ENTITYSET)),t})},e.prototype.callMethod=function(t,e){return o.CollectionBaseService.callMethod({httpClient:this.httpClient,collectionUri:this.collectionUri,isEntitySet:this.isEntitySet,methodName:t,parameters:e})},e}(i.default);e.default=a},function(t,e,r){"use strict";function n(t){return/^\/rest\/\w+\/\$entityset\/[A-Z0-9]+(\?.*)?$/i.test(t)}Object.defineProperty(e,"__esModule",{value:!0});var i=r(14),o=function(){function t(){}return t.fetch=function(t){var e=t.httpClient,r=t.collectionUri,n=t.isEntitySet,o=t.options;if(!n&&o.select&&o.select.length>0)throw new Error("Collection.fetch: option select is not allowed when collection is deferred");o.method="subentityset";var a=i.default.handleOptions(o);n||(a="&"+a.slice(1));var s=r;return e.get({uri:s+a}).then(function(t){var e=JSON.parse(t.body);delete e.__entityModel;for(var r=0,n=e.__ENTITIES;r<n.length;r++){var o=n[r];i.default.removeRestInfoFromEntity(o)}return e})},t.callMethod=function(t){var e=t.httpClient,r=t.collectionUri,n=t.isEntitySet,o=t.methodName,a=t.parameters,s=r;if(n)s+="/"+o;else{var u=i.default.handleOptions({method:"subentityset",emMethod:o});s+="&"+u.slice(1)}return e.post({uri:s,data:a}).then(function(t){var e=JSON.parse(t.body);return e.result||e||null})},t}();e.CollectionBaseService=o,e.isEntitySetUri=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={DEFAULT_PAGE_SIZE:40,DEFAULT_SESSION_DURATION:3600}},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(4),o=r(26),a=function(t){function e(e){var r=e.wakJSC,n=e.media,i=e.dataClassBusiness,a=e.isImage,s=e.attributeName,u=e.entity,c=t.call(this,{wakJSC:r})||this;return c.media=n,c.entity=u,c.dataClassBusiness=i,c.isImage=a===!0,c.service=new o.default({wakJSC:r,mediaBusiness:c,media:n,attributeName:s,dataClassBusiness:i}),c}return n(e,t),e.prototype._decorateMedia=function(){this.media.upload=this.upload.bind(this),this.media.delete=this.delete.bind(this)},e.prototype.upload=function(t){var e=this;if(!this.entity._key)throw new Error("Media.upload: entity must be saved before uploading a media");return this.service.upload(t,t.type).then(function(t){return t}).then(function(){return e.entity.fetch()})},e.prototype.delete=function(){var t=this;if(!this.entity._key)throw new Error("Media.upload: entity must be saved before deleting a media");return this.service.delete().then(function(){return t.entity.fetch()})},e}(i.default);e.default=a},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(6),o=r(27),a=function(t){function e(e){var r=e.wakJSC,n=e.mediaBusiness,i=e.media,o=e.attributeName,a=e.dataClassBusiness,s=t.call(this,{wakJSC:r})||this;return s.dataClassName=a.dataClass.name,s.entity=n.entity,s.isImage=n.isImage,s.media=i,s.attributeName=o,s}return n(e,t),e.prototype.upload=function(t,e){return o.MediaBaseService.upload({httpClient:this.httpClient,dataClassName:this.dataClassName,entityKey:this.entity._key,attributeName:this.attributeName,isImage:this.isImage,file:t})},e.prototype.delete=function(){return o.MediaBaseService.delete({httpClient:this.httpClient,dataClassName:this.dataClassName,
entityKey:this.entity._key,entityStamp:this.entity._stamp,attributeName:this.attributeName})},e}(i.default);e.default=a},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.upload=function(t){var e=t.httpClient,r=t.dataClassName,n=t.entityKey,i=t.attributeName,o=t.file,a=t.isImage,s=this._buildUri(r,n,i);return a&&(s+="?$rawPict="+o.type),e.post({uri:s,data:o,binary:!0})},t.delete=function(t){var e=t.httpClient,r=t.dataClassName,n=t.entityKey,i=t.entityStamp,o=t.attributeName,a="/"+r+"("+n+")",s={__KEY:n,__STAMP:i};return s[o]=null,e.post({uri:a,data:s})},t._buildUri=function(t,e,r){return"/"+t+"("+e+")/"+r},t}();e.MediaBaseService=r},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){var e=t.deferred,r=t.dataClass;this.entities=[],this._deferred=e===!0,Object.defineProperty(this,"_dataClass",{enumerable:!1,configurable:!1,writable:!1,value:r})}return t}();e.default=r},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(4),o=r(30),a=r(24),s=function(t){function e(e){var r=e.wakJSC,n=t.call(this,{wakJSC:r})||this;return n.service=new o.default({wakJSC:r}),n}return n(e,t),e.prototype.login=function(t,e,r){var n=r||a.default.DEFAULT_SESSION_DURATION;if("number"!=typeof n||n<=0)throw new Error("Directory.login: invalid duration parameter");return this.service.login(t,e,n).catch(function(){return Promise.reject(new Error("Directory.login: Unauthorized"))})},e.prototype.logout=function(){return this.service.logout().catch(function(){return Promise.reject(new Error("Directory.logout: logout failed"))})},e.prototype.getCurrentUser=function(){return this.service.getCurrentUser().then(function(t){return t}).catch(function(){return Promise.reject(new Error("Directory.getCurrentUser: user is not logged in"))})},e.prototype.getCurrentUserBelongsTo=function(t){if("string"!=typeof t)throw new Error("Directory.getCurrentUserBelongsTo: group must be a string");return this.service.getCurrentUserBelongsTo(t).then(function(){return!0}).catch(function(){return!1})},e}(i.default);e.default=s},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(6),o=r(31),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.login=function(t,e,r){return o.DirectoryBaseService.login({httpClient:this.httpClient,username:t,password:e,duration:r})},e.prototype.logout=function(){return o.DirectoryBaseService.logout({httpClient:this.httpClient})},e.prototype.getCurrentUser=function(){return o.DirectoryBaseService.getCurrentUser({httpClient:this.httpClient})},e.prototype.getCurrentUserBelongsTo=function(t){return o.DirectoryBaseService.getCurrentUserBelongsTo({httpClient:this.httpClient,group:t})},e}(i.default);e.default=a},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.login=function(t){var e=t.httpClient,r=t.username,n=t.password,i=t.duration;return e.post({uri:"/rest/$directory/login",data:[r,n,i]}).then(function(){return!0})},t.logout=function(t){var e=t.httpClient;return e.get({uri:"/rest/$directory/logout"}).then(function(t){var e=JSON.parse(t.body);return!(!e.result||e.result!==!0)||Promise.reject(new Error)})},t.getCurrentUser=function(t){var e=t.httpClient;return e.get({uri:"/rest/$directory/currentUser"}).then(function(t){var e=JSON.parse(t.body);return e.result&&e.result.ID?e.result:Promise.reject(new Error)})},t.getCurrentUserBelongsTo=function(t){var e=t.httpClient,r=t.group;return e.post({uri:"/rest/$directory/currentUserBelongsTo",data:[r]}).then(function(t){var e=JSON.parse(t.body);return!(!e||!e.result||e.result!==!0)||Promise.reject(new Error)})},t}();e.DirectoryBaseService=r},function(t,e){t.exports={name:"wakanda-client",main:"dist/wakanda-client.node.js",version:"2.0.0",description:"Wakanda Client allows you to easily interact with Wakanda Server on a JavaScript (browser or node) environment",typings:"dist/wakanda-client.d.ts",browser:"dist/wakanda-client.min.js",repository:"wakanda/wakanda-javascript-client",scripts:{"webpack-watch":"node ./node_modules/webpack/bin/webpack.js --progress --colors --watch","webpack-build":"node ./node_modules/webpack/bin/webpack.js --progress --colors","webpack-build:ci":"node ./node_modules/webpack/bin/webpack.js --progress --colors --config webpack.ci.js","webpack-build:prod":"node ./node_modules/webpack/bin/webpack.js --progress --colors --config webpack.prod.js","test:karma:single":"node ./node_modules/karma/bin/karma start","test:karma:full":"npm run webpack-build && npm run test:karma:single","test:node:single":'http_proxy="" node ./node_modules/mocha/bin/mocha test/bootstrap.js test/spec/**/*.spec.js',"test:node:full":"npm run webpack-build && npm run test:node:single","test-single":"./test.sh single",test:"./test.sh","test-server:start":"node test/connect/server.js & echo $! > testserver.pid && sleep 1","test-server:stop":"kill `cat testserver.pid` && rm testserver.pid","test-server:record":"node test/connect/server.js record & echo $! > testserver.pid","test-server:init":"rm -rf test/connect/mocks && npm run test-server:record && npm run webpack-build && npm run test:node:single && npm run test:karma:single && npm run test-server:stop",codecov:"cat coverage/*/lcov.info | codecov",tsc:"node ./node_modules/typescript/bin/tsc",serve:'node ./node_modules/.bin/concurrently -r "npm run webpack-watch" "node ./node_modules/.bin/gulp serve"'},author:"Wakanda SAS",license:"MIT",devDependencies:{"babel-core":"^6.3.17","babel-loader":"^6.2.0","babel-polyfill":"^6.3.14","babel-preset-es2015":"^6.3.13","body-parser":"^1.14.2",chai:"^3.4.1",chalk:"^1.1.1","codecov.io":"^0.1.6",concurrently:"^2.0.0",connect:"^3.4.0","connect-prism":"mrblackus/connect-prism",eslint:"^1.10.3","eslint-loader":"^1.2.0",express:"^4.13.3",grunt:"^0.4.5",gulp:"^3.9.0","gulp-connect":"^2.2.0","http-proxy-middleware":"^0.9.0",isparta:"^4.0.0","isparta-loader":"^2.0.0","json-loader":"^0.5.4",karma:"^1.3.0","karma-chai":"^0.1.0","karma-coverage":"^0.5.3","karma-mocha":"^1.2.0","karma-phantomjs-launcher":"^1.0.2","karma-verbose-reporter":"0.0.3",mocha:"^3.1.2",path:"^0.12.7",phantomjs:"^2.1.7","serve-static":"^1.10.2","ts-loader":"0.8.1",tslint:"^3.9.0","tslint-loader":"^2.1.4",typescript:"^2.0.6",webpack:"^1.12.15"},dependencies:{"core-js":"^2.4.1",request:"^2.76.0"}}},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(34),o=r(35),a=r(36),s=function(t){function e(e){var r=e.apiPrefix,n=t.call(this,{apiPrefix:r})||this;return n.request=i,n.cookieJar=n.request.jar(),n}return n(e,t),e.prototype._clearCookie=function(){this.cookieJar=this.request.jar()},e.prototype.get=function(e){var r=e.uri,n=e.params;try{var i=t.prototype.get.call(this,{uri:r,params:n});if(null!==i)return Promise.resolve(i)}catch(t){return Promise.reject(t)}var o=this._getWithoutInterceptor({uri:r,params:n});return t.prototype.responseGet.call(this,r,o)},e.prototype._getWithoutInterceptor=function(t){var e=t.uri,r=t.params,n={url:this.prefix+e,method:"GET",qs:r,jar:this.cookieJar};return this._httpResponseAdaptor({requestOptions:n})},e.prototype.post=function(e){var r=e.uri,n=e.data,i=e.binary;try{var o=t.prototype.post.call(this,{uri:r,data:n,binary:i});if(null!==o)return Promise.resolve(o)}catch(t){return Promise.reject(t)}var a={url:this.prefix+r,method:"POST",form:n,jar:this.cookieJar};try{i||(a.headers={"Content-Type":"application/json"},a.form=JSON.stringify(n))}catch(t){return Promise.reject(t)}var s=this._httpResponseAdaptor({requestOptions:a});return t.prototype.responsePost.call(this,r,s)},e.prototype._httpResponseAdaptor=function(t){var e=this,r=t.requestOptions;return new Promise(function(t,n){e.request(r,function(e,r,i){e||r.statusCode>=400?n(e||{statusMessage:r.statusMessage,body:i}):t(new a.default({statusCode:r.statusCode,headers:[],body:i}))})})},e}(o.HttpClient);e.default=s},function(t,e){t.exports=require("request")},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){var e=t.apiPrefix;this.prefix=e,this._getRequestInterceptors=[],this._postRequestInterceptors=[],this._getResponseInterceptors=[],this._postResponseInterceptors=[]}return t.prototype.get=function(t){for(var e=0;e<this._getRequestInterceptors.length;e++){var r=this._getRequestInterceptors[e],n=r(t);if(null!==n&&"undefined"!=typeof n)return n}return null},t.prototype.post=function(t){for(var e=0;e<this._postRequestInterceptors.length;e++){var r=this._postRequestInterceptors[e],n=r(t);if(null!==n&&"undefined"!=typeof n)return n}return null},t.prototype.responseGet=function(t,e){for(var r=0,n=this._getResponseInterceptors;r<n.length;r++){var i=n[r],o=i(t,e);if(o)return o}return e},t.prototype.responsePost=function(t,e){for(var r=0,n=this._postResponseInterceptors;r<n.length;r++){var i=n[r],o=i(t,e);if(o)return o}return e},t.prototype.registerRequestInterceptor=function(t,e){var r=this,n=this._interceptorTypeToArray(t);n.forEach(function(t){"get"===t?r._getRequestInterceptors.push(e):"post"===t&&r._postRequestInterceptors.push(e)})},t.prototype.registerResponseInterceptor=function(t,e){var r=this,n=this._interceptorTypeToArray(t);n.forEach(function(t){"get"===t?r._getResponseInterceptors.push(e):"post"===t&&r._postResponseInterceptors.push(e)})},t.prototype._interceptorTypeToArray=function(t){var e=this,r=[];if("string"==typeof t){if(!this._isValidInterceptorType(t.toLowerCase()))throw new Error("HttpClient.registerInterceptor: invalid interceptor type");r.push(t.toLowerCase())}else{if(!Array.isArray(t))throw new Error("HttpClient.registerInterceptor: type must be a string or an array");t.forEach(function(t){if(!e._isValidInterceptorType(t.toLowerCase()))throw new Error("HttpClient.registerInterceptor: invalid interceptor type");r.push(t.toLowerCase())})}return r},t.prototype._isValidInterceptorType=function(t){var e=["get","post"];return e.indexOf(t)!==-1},t}();e.HttpClient=r,e.default=r},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){var e=t.statusCode,r=t.headers,n=t.body;this.statusCode=e,this.headers=r||[],this.body=n}return t}();e.default=r}])});
//# sourceMappingURL=wakanda-client.node.min.js.map